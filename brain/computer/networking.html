<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 05.13.24 11:41 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org Mode" />
<link rel='stylesheet' type='text/css' href='/~abellon/assets/css/common.css'>
<link rel='stylesheet' type='text/css' href='/~abellon/assets/css/brain.css'>
<link rel='icon' type='image/png' href='../images/art/personal_logo.png'>
<meta name='viewport' content='width=device-width, initial-scale=.5'>
<meta charset='utf-8'/>
<base target='_blank'/>
<script src='../assets/js/vim.js'></script>
</head>
<body>
<div id="preamble" class="status">
<div class='preamble'>
<h1 style='margin-top: 60px;'></h1></div>
</div>
<div id="content" class="content">
<div id="outline-container-orgc82d884" class="outline-2">
<h2 id="orgc82d884">networking</h2>
<div class="outline-text-2" id="text-orgc82d884">
</div>
<div id="outline-container-orgf830af6" class="outline-3">
<h3 id="orgf830af6">articles</h3>
<div class="outline-text-3" id="text-orgf830af6">
<ul class="org-ul">
<li><a href="https://lwn.net/SubscriberLink/814522/ab3bfaa8f75c60ce/">a quic look at http/3</a></li>
<li><a href="https://robotmoon.com/ssh-tunnels//#">a visual guide to ssh tunnels</a></li>
<li><a href="https://www.cloudflare.com/learning/dns/dns-over-tls/">dns over tls vs. dns over https</a></li>
<li><a href="https://blog.cloudflare.com/encrypted-sni/">encrypted sni</a></li>
<li><a href="https://askubuntu.com/questions/324685/how-to-route-all-internet-traffic-through-tor-the-onion-router">how to route all internet traffic through tor?</a></li>
<li><a href="https://http3-explained.haxx.se/en/">http/3 explained</a></li>
<li><a href="https://www.youtube.com/watch?v=0_unEBSxqGY">learn with me: vlans &amp; pfsense</a></li>
<li><a href="https://startyourownisp.com/">start your own isp</a></li>
<li><a href="https://www.reddit.com/r/networking/comments/ffblzq/ysk_about_firewalls_and_how_they_work/">ysk about firewalls and how they work</a></li>
<li><a href="https://wiki.radioreference.com/index.php/stores">store frequencies</a></li>
<li><a href="https://ossmann.blogspot.com/2010/03/16-pocket-spectrum-analyzer">im-me specturm analyzer</a></li>
<li><a href="https://ciechanow.ski/gps/">gps</a></li>
<li><a href="http://mamageekminis.com/dave/scanning/malls.htm">scanning malls (radios)</a></li>
<li><a href="https://www.hackster.io/news/reverse-engineer-hash-tackles-smart-meter-monitoring-with-an-sdr-and-a-faraday-cage-61573a1a96cf">reverse engineering smart meters</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3f8f051" class="outline-3">
<h3 id="org3f8f051">bluetooth</h3>
<div class="outline-text-3" id="text-org3f8f051">
<ul class="org-ul">
<li><a href="https://github.com/hackgnar/ble_ctf">ble ctf</a></li>
</ul>
</div>
</div>

<div id="outline-container-org115c6aa" class="outline-3">
<h3 id="org115c6aa">books</h3>
<div class="outline-text-3" id="text-org115c6aa">
<ul class="org-ul">
<li><a href="https://link.springer.com/book/10.1007/978-3-319-78910-1">a brief history of everything wireless</a></li>
</ul>
</div>
</div>

<div id="outline-container-org73c1521" class="outline-3">
<h3 id="org73c1521">classes</h3>
<div class="outline-text-3" id="text-org73c1521">
<ul class="org-ul">
<li><a href="https://cs249i.stanford.edu/">cs249i: the modern internet</a></li>
<li><a href="https://cseweb.ucsd.edu/~schulman/class/cse291_f21/">cse 291 - internet infrastructure</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3d00e15" class="outline-3">
<h3 id="org3d00e15">hardware</h3>
<div class="outline-text-3" id="text-org3d00e15">
<ul class="org-ul">
<li><b>router</b>: connects subnets and translates addresses
<ul class="org-ul">
<li>routers dont allow broadcasts between subnets</li>
</ul></li>
<li><b>hub</b>: sends packets to all ports</li>
<li><b>switch</b>: sends packets to the one (physical) port where the recipient of the packet is
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Forwarding_information_base"><b>cam table</b></a> - maps mac addresses to (physical) ports in a switch
<ul class="org-ul">
<li>how does it build it? laptop sends out dhcp request with source mac address, and switch sees it and adds it to cam table</li>
</ul></li>
<li>If you <a href="https://en.wikipedia.org/wiki/MAC_flooding"><b>mac flood</b></a> a switch (overflow the cam table), it changes to hub mode</li>
<li>switch is layer 2, doesnt care about ip addresses</li>
</ul></li>
<li><b>access point</b>: like a hub, but wiresless. the packets get forwarded to every device (since you can't send waves to just one device), your computer knows to ignore packets thats not for you
<ul class="org-ul">
<li><i>unless</i> you put your network card in promiscuous mode</li>
</ul></li>
</ul>

<p>
<a href="https://en.wikipedia.org/wiki/MAC_spoofing">mac Spoofing</a> is a thing.
</p>
</div>
</div>

<div id="outline-container-org6abfe0e" class="outline-3">
<h3 id="org6abfe0e">7-layer model</h3>
<div class="outline-text-3" id="text-org6abfe0e">
</div>
<div id="outline-container-org2545502" class="outline-4">
<h4 id="org2545502">1 - physical (802.11, 802.3)</h4>
</div>
<div id="outline-container-org1e42385" class="outline-4">
<h4 id="org1e42385">2 - link</h4>
<div class="outline-text-4" id="text-org1e42385">
</div>
<ul class="org-ul">
<li><a id="orgad3cdb4"></a>ethernet, tokenring, arp [frame]<br />
<div class="outline-text-5" id="text-orgad3cdb4">
<ul class="org-ul">
<li><code>DST MAC (6bytes), SRC MAC (6), TYPE (2)</code></li>
<li>destination first so you know if it's for you or not (unless you're in promiscuous modes)</li>
<li>ethernet can go over any physical thing</li>
<li>broadcast address is all 1s: all =f=s or 256</li>
<li><code>ARP=/=RARP</code> (reverse)
<ul class="org-ul">
<li><code>PHY ADDR (6) (DST, SRC), LOG ADDR (4) (DST, SRC), OPCODE</code>
<ul class="org-ul">
<li><code>PHY</code> - MAC</li>
<li><code>LOG</code> - IP</li>
</ul></li>
<li>only fill in 3 fields</li>
<li><code>ARP</code> poisoning - continually send out packets
<ul class="org-ul">
<li>tell victim that you're the gateway</li>
<li>tell gateway that you're the victim</li>
<li>avoid this by only listening to the dhcp port (or set it manually if no dhcp</li>
</ul></li>
<li><code>arp -a=/=ip neigh(bor)</code></li>
</ul></li>
</ul>
</div>
</li>
</ul>
</div>

<div id="outline-container-org5317594" class="outline-4">
<h4 id="org5317594">3 - network</h4>
<div class="outline-text-4" id="text-org5317594">
</div>
<ul class="org-ul">
<li><a id="org2634ad0"></a>ip, ipv6 [packet]<br />
<div class="outline-text-5" id="text-org2634ad0">
<ul class="org-ul">
<li>ip packet
<ul class="org-ul">
<li>Header: <code>SRC IP, DST IP, TTL, Length, Frag, Proto, Checksum, Header Length</code>
<ul class="org-ul">
<li><code>Frag</code>: fragmentation</li>
<li><code>Proto</code>: protocal tells you whether it's ICMP, TCP, etc.</li>
<li><code>Header Length</code>: you multiply it by 4 (which is why it needs to be in multiples of 4)
<ul class="org-ul">
<li>ipv4 header must be at least 20 bytes, can be more in multiples of 4, adding on additional options fields</li>
</ul></li>
<li><code>TTL</code>: different for every operating system</li>
</ul></li>
</ul></li>
<li><code>traceroute</code>
<ul class="org-ul">
<li>windows: ICMP <code>echo</code> request</li>
<li>mac: UDP</li>
<li>linux: TCP</li>
</ul></li>
<li><code>ICMP</code>
<ul class="org-ul">
<li>used for error reporting</li>
<li>has no port, since ports are used to tell what process to send it to. icmp just gets sent to the kernel.</li>
</ul></li>
</ul>
</div>
</li>
</ul>
</div>

<div id="outline-container-org735178f" class="outline-4">
<h4 id="org735178f">4 - transport</h4>
<div class="outline-text-4" id="text-org735178f">
</div>
<ul class="org-ul">
<li><a id="org9dda5ad"></a>icmp, tcp, udp<br />
<div class="outline-text-5" id="text-org9dda5ad">
<ul class="org-ul">
<li>tcp packet
<ul class="org-ul">
<li><code>SYN</code>, <code>SYN/ACK</code>, <code>ACK</code> (could also be <code>SYN</code>, <code>SYN</code>, <code>ACK</code>, <code>ACK</code>)</li>
<li>other flags: <code>RST</code> clear this from your connection table, <code>FIN</code> at the end of the whole session to stop, <code>URG</code> urgent, <code>PSH</code> sending unrequested data</li>
</ul></li>
<li>header: <code>Length, Checksum, DST Port, SRC Port, Seq number, Flags</code> (not in that order)
<ul class="org-ul">
<li><code>Checksum</code> is a bit operation that has more collisions than a hash. very fast to do on hardware</li>
</ul></li>
</ul>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgade674b" class="outline-4">
<h4 id="orgade674b">5 - session</h4>
<div class="outline-text-4" id="text-orgade674b">
</div>
<ul class="org-ul">
<li><a id="org77ad90e"></a>rpc, netbios<br /></li>
</ul>
</div>
<div id="outline-container-org01d0514" class="outline-4">
<h4 id="org01d0514">6 - presentation</h4>
<div class="outline-text-4" id="text-org01d0514">
</div>
<ul class="org-ul">
<li><a id="orge322e50"></a>tls/ssl [ssl = tlsv1]<br /></li>
</ul>
</div>
<div id="outline-container-orga9a49a0" class="outline-4">
<h4 id="orga9a49a0">7 - application</h4>
<div class="outline-text-4" id="text-orga9a49a0">
</div>
<ul class="org-ul">
<li><a id="org1311ed4"></a>http<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgf241351" class="outline-3">
<h3 id="orgf241351">protcols</h3>
<div class="outline-text-3" id="text-orgf241351">
</div>
<div id="outline-container-org6ba9ec5" class="outline-4">
<h4 id="org6ba9ec5">dns</h4>
<div class="outline-text-4" id="text-org6ba9ec5">
<ul class="org-ul">
<li><a href="https://www.reddit.com/r/netsecstudents/comments/axje4o/do_you_know_any_good_bookarticleother_resource/">explaining dns</a></li>
<li><a href="https://chrisachard.com/cheatsheets/dns-cheatsheet.pdf">dns cheatsheet</a></li>
</ul>
</div>

<ul class="org-ul">
<li><a id="orgd3903fd"></a><code>dig</code> - a dns tool<br />
<div class="outline-text-5" id="text-orgd3903fd">
<p>
general use
</p>

<pre class="example" id="org6c77d02">
→ dig alex-bellon.com
; &lt;&lt;&gt;&gt; DiG 9.14.6 &lt;&lt;&gt;&gt; alex-bellon.com
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 64475
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 4096
;; QUESTION SECTION:
;alex-bellon.com.       IN  A

;; ANSWER SECTION:
alex-bellon.com.    3600    IN  A   216.239.32.21
alex-bellon.com.    3600    IN  A   216.239.36.21
alex-bellon.com.    3600    IN  A   216.239.34.21
alex-bellon.com.    3600    IN  A   216.239.38.21

;; Query time: 28 msec
;; SERVER: 128.83.185.41#53(128.83.185.41)
;; WHEN: Tue Nov 12 17:51:32 CST 2019
;; MSG SIZE  rcvd: 108
</pre>

<p>
Shorter Answer
</p>

<pre class="example" id="org375ff1f">
→ dig +short alex-bellon.com
216.239.36.21
216.239.38.21
216.239.32.21
216.239.34.21
</pre>

<p>
Nameserver Details
</p>

<pre class="example" id="org29cf7f7">
→ dig ns +short alex-bellon.com
ns-cloud-a1.googledomains.com.
ns-cloud-a3.googledomains.com.
ns-cloud-a4.googledomains.com.
ns-cloud-a2.googledomains.com.
</pre>

<p>
Use a different DNS server
</p>

<pre class="example" id="org9b94382">
→ dig alex-bellon.com @1.1.1.1
</pre>

<p>
Reverse DNS Lookup
</p>

<pre class="example" id="org76535a8">
→ dig -x 8.8.8.8
</pre>

<p>
<a href="https://mrkaran.dev/posts/dig-overview/">source</a>
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-org923d042" class="outline-4">
<h4 id="org923d042">http</h4>
<div class="outline-text-4" id="text-org923d042">
<ul class="org-ul">
<li><a href="https://charemza.name/blog/posts/abstractions/http/http-guide-for-developers/">http guide for developers</a></li>
<li><a href="https://frenxi.com/http-headers-you-dont-expect/">http headers you didn't expect</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9b57a97" class="outline-4">
<h4 id="org9b57a97">tcp/udp</h4>
<div class="outline-text-4" id="text-org9b57a97">
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">list of tcp/udp ports</a></li>
<li><a href="http://www.madhur.co.in/blog/2011/09/18/filteredclosed">closed vs filtered ports</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf2973cf" class="outline-3">
<h3 id="orgf2973cf">reverse proxy</h3>
<div class="outline-text-3" id="text-orgf2973cf">
<ul class="org-ul">
<li><a href="https://medium.com/@discite/self-hosted-docker-and-nginx-1dcf2a51b083">self-hosted reverse proxy with docker and nginx</a>, <a href="https://www.reddit.com/r/selfhosted/comments/f1o546/using_a_cheap_vps_to_install_docker_and_nginx_for/">source</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3bd60ec" class="outline-3">
<h3 id="org3bd60ec">tools</h3>
<div class="outline-text-3" id="text-org3bd60ec">
<ul class="org-ul">
<li><a href="https://github.com/0xinfection/awesome-waf">awesome-waf</a> - everything awesome about web-application firewalls (waf)</li>
<li><a href="https://github.com/brimsec/brim">brim</a> - desktop application to efficiently search large packet captures and zeek logs.</li>
<li><a href="https://github.com/rhaidiz/broxy">broxy</a> - an http/https intercept proxy written in go.</li>
<li><a href="https://github.com/mozilla-services/iprepd"><code>iprepd</code></a> - centralized ip reputation daemon</li>
<li><code>iptables</code>
<ul class="org-ul">
<li><a href="https://www.redhat.com/sysadmin/iptables">redhat guide to <code>iptables</code></a></li>
<li>look in <code>ccdc/firewalls/iptables.md</code></li>
</ul></li>
<li><a href="https://milkman.dev/">milkman</a> - a request/response workbench</li>
<li><a href="https://ngrok.com/">ngrok</a> - ngrok is a reverse proxy that creates a secure tunnel from a public endpoint to a locally running web service. ngrok captures and analyzes all traffic over the tunnel for later inspection and replay.</li>
<li><a href="https://github.com/evilsocket/opensnitch">opensnitch</a> - host-based application firewall</li>
<li><a href="https://github.com/izderadicka/ptunnel">ptunnel</a> - tunnel connections through https proxy</li>
<li><a href="https://github.com/lnslbrty/ptunnel-ng">ptunnel-ng</a> - tunnel tcp connections through icmp</li>
<li><a href="https://ssl-config.mozilla.org/">ssl configuration generator</a></li>
</ul>
</div>
</div>

<div id="outline-container-org249f8e5" class="outline-3">
<h3 id="org249f8e5">resources</h3>
<div class="outline-text-3" id="text-org249f8e5">
<ul class="org-ul">
<li><a href="https://ixpdb.euro-ix.net/en/">the ixp database</a></li>
<li><a href="https://www.internetexchangemap.com/">internet exchange map</a></li>
<li><a href="https://messwithdns.net/">mess with dns</a></li>
<li><a href="https://tls13.ulfheim.net/">the illustrated tls 1.3 connection</a></li>
</ul>
</div>
</div>

<div id="outline-container-org7603792" class="outline-3">
<h3 id="org7603792">vpn</h3>
<div class="outline-text-3" id="text-org7603792">
</div>
<div id="outline-container-orge588c02" class="outline-4">
<h4 id="orge588c02">vpn tunneling</h4>
<div class="outline-text-4" id="text-orge588c02">
<ul class="org-ul">
<li><a href="https://www.zerotier.com/download/">zerotier</a>
<ul class="org-ul">
<li>zerotier allows you to directly connect from your machine to another remote machine on another network, and it "punches through" firewalls, nats, etc. to make a direct connection. you are given a 10 digit <code>zerotier address</code> for your node, and in order to connect to other networks you need its corresponding 16 digit <code>network id</code>. this allows you to create mesh networks across a bunch of machines and networks.</li>
<li><a href="https://github.com/tralph3/zerotier-gui">zerotier linux gui</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
